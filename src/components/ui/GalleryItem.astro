---
export interface Props {
  src: string;
  alt: string;
  category: 'portraits' | 'children' | 'artistic';
  width?: number;
  height?: number;
  title?: string;
}

const { src, alt, category, width = 800, height = 600, title } = Astro.props;

// Calculate aspect ratio for proper placeholder sizing
const aspectRatio = (height / width * 100).toFixed(2);
---

<div
  class="gallery-item masonry-item relative overflow-hidden rounded-lg shadow-lg transition-all duration-300 hover:shadow-xl hover:transform hover:-translate-y-1"
  data-category={category}
>
  <a
    href={src}
    data-pswp-width={width}
    data-pswp-height={height}
    class="block relative group"
  >
    <div class="relative" style={`padding-bottom: ${aspectRatio}%`}>
      <img
        src={src}
        alt={alt}
        class="absolute inset-0 w-full h-full object-cover transition-opacity duration-300"
        loading="lazy"
        decoding="async"
      />
    </div>

    <div class="gallery-overlay rounded-lg">
      <div class="text-white text-center">
        <i class="fas fa-search-plus text-3xl mb-3"></i>
        {title && <p class="text-base font-light px-4">{title}</p>}
      </div>
    </div>
  </a>
</div>